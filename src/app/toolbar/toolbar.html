<div layout="row" layout-align="start center">
    <div layout="row" layout-align="start center" flex>
        <md-button id="navigation-toggle" class="md-icon-button" ng-click="vm.toggleSidenav('navigation')"
                   hide-gt-md aria-label="Toggle navigation">
            <md-icon md-font-icon="icon-menu" class="icon"></md-icon>
        </md-button>

        <md-button id="navigation-sidenav-mode-toggle" class="md-icon-button"
                   ng-click="vm.toggleNavigationSidenavFold($event)" hide show-gt-md
                   aria-label="Toggle navigation mode">
            <md-icon md-font-icon="icon-backburger" class="icon"></md-icon>
        </md-button>

        <div id="search" flex layout="row" layout-align="start center">
            <label for="search-input">
                <md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>
            </label>
            <input id="search-input" type="text" ng-model="global.search" placeholder="Search"
                   translate translate-attr-placeholder="TOOLBAR.SEARCH"  flex>
        </div>
    </div>

    <div layout="row" layout-align="start center">
        <md-menu-bar id="user-menu">
            <md-menu md-offset="0 72" md-position-mode="target-right target">
                <md-button class="user-button" ng-click="$mdOpenMenu()"
                           aria-label="User settings"
                           md-menu-origin>
                    <div layout="row" layout-align="space-between center">
                        <div class="avatar-wrapper">
                            <img md-menu-align-target class="avatar" src="assets/images/avatars/profile.jpg">
                        </div>
                        <span class="username" hide-sm>{{ vm.userFullName }}</span>
                        <md-icon md-font-icon="icon-chevron-down"
                                 class="icon s16" hide-sm></md-icon>
                    </div>
                </md-button>

                <md-menu-content width="3" class="md-background-bg">
                    <md-menu-item ui-sref="app.pages_profile">
                        <md-button>
                            <span layout="row" layout-align="start center">
                                <md-icon md-font-icon="icon-account" class="icon"></md-icon>
                                <span translate="TOOLBAR.MY_PROFILE">My Profile</span>
                            </span>
                        </md-button>
                    </md-menu-item>

                    <md-menu-item ui-sref="app.pages_feedback">
                        <md-button>
                            <span layout="row" layout-align="start center">
                                <md-icon md-font-icon="icon-pen" class="icon"></md-icon>
                                <span translate="TOOLBAR.FEEDBACK">Feedback</span>
                            </span>
                        </md-button>
                    </md-menu-item>

                    <md-menu-divider></md-menu-divider>

                    <md-menu-item>
                        <md-button ng-click="vm.logout()">
                            <span layout="row" layout-align="start center">
                                <md-icon md-font-icon="icon-logout" class="icon"></md-icon>
                                <span translate="TOOLBAR.LOGOUT">Logout</span>
                            </span>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </md-menu-bar>

        <div class="toolbar-separator"></div>

        <md-menu id="language-menu" md-offset="0 72" md-position-mode="target-right target">
            <md-button class="language-button" ng-click="$mdOpenMenu()"
                       aria-label="Language" md-menu-origin md-menu-align-target>
                <div layout="row" layout-align="center center">
                    <!--<img class="flag" ng-src="assets/images/flags/{{vm.selectedLanguage.flag}}.png">-->
                    <span class="iso">{{vm.selectedLanguage.code}}</span>
                </div>
            </md-button>

            <md-menu-content width="3" id="language-menu-content">
                <md-menu-item ng-repeat="lang in vm.languages">
                    <md-button ng-click="vm.changeLanguage(lang)" aria-label="{{lang.title}}" translate
                               translate-attr-aria-label="{{lang.title}}">
                        <span layout="row" layout-align="start center">
                            <!--<img class="flag" ng-src="assets/images/flags/{{lang.flag}}.png">-->
                            <span translate="{{lang.translation}}">{{lang.title}}</span>
                        </span>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>
</div>
