<div class="md-whiteframe-1dp" layout-margin id="step-main">
    <div id="step-header" class="step-table-title md-amber-A200-bg" md-swipe-up="expandCollapseToggle()">
        <a ui-sref="app.steps({projectId:projectId, stepId:step.stepId, stepName:step.stepName})">
            {{ step.stepName }}
        </a>
        <md-button class="md-icon-button" aria-label="expand/collapse"
                   ng-disabled="!expandable"
                   ng-click="toggleExpanded()" style="float:right">
            <md-icon md-font-icon="icon-backburger"
                     ng-class="{'collapse': !isExpanded, 'expand': isExpanded}"></md-icon>
        </md-button>

        <md-button class="md-icon-button"
                   aria-label="select/unselect"
                   ng-disabled="(step.sections.length === 0)"

                   ng-click="setStepSelection()"
                   style="float:right">
            <md-icon ng-if="!step.value" md-font-icon="icon-select"></md-icon>
            <md-icon ng-if="step.value" md-font-icon="icon-select-inverse"></md-icon>
        </md-button>
    </div>

    <md-divider></md-divider>
    <md-content id="step-content" ng-if="!isExpanded" ng-animate="'expandCollapse'">
        <md-list>
            <md-list-item  ng-repeat="section in step.sections">
                <md-checkbox class="md-secondary" ng-model="section.value" ng-change="singleSelection()"></md-checkbox>
                <p> {{ section.label }} </p>
            </md-list-item>
        </md-list>
    </md-content>
</div>

